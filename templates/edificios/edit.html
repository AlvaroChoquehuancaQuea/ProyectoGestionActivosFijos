{% extends 'base.html' %}

{% block content %}
<link href="{{ url_for('static', filename='css/style3.css') }}" rel="stylesheet">
<div class="content">
    <div class="content-wrapper">
        <h2 class="mb-4">Editar Edificios</h2>

        <form method="post" enctype="multipart/form-data">
            <!-- DATOS IDENTIFICACIÓN -->
            <fieldset class="border p-3 mb-4">
                <legend>Datos de Identificación</legend>
                <div class="row">
                    <div class="col-md-6">
                        <label for="descripcion" class="form-label">Descripción:</label>
                        <input type="text" class="form-control" id="descripcion" name="descripcion" required
                            value="{{ edificio.descripcion }}">
                    </div>
                    <div class="col-md-3">
                        <label for="categoria" class="form-label">Categoria:</label>
                        <input type="text" class="form-control" id="categoria" name="categoria" required
                            value="{{ edificio.categoria }}">
                    </div>
                    <div class="col-md-3">
                        <label for="uso" class="form-label">Uso:</label>
                        <input type="text" class="form-control" id="uso" name="uso" required
                            value="{{ edificio.uso }}">
                    </div>
                </div>
            </fieldset>

            <!-- DATOS GENERALES -->
            <fieldset class="border p-3 mb-4">
                <legend>Datos Generales</legend>
                <div class="row">
                    <div class="col-md-4">
                        <label for="estado" class="form-label">Estado:</label>
                        <select class="form-select" id="estado" name="estado" required>
                            <option value="">-- Seleccione --</option>
                            <option value="Bueno" {% if edificio.estado=='Bueno' %}selected{% endif %}>Bueno</option>
                            <option value="Regular" {% if edificio.estado=='Regular' %}selected{% endif %}>Regular
                            </option>
                            <option value="Malo" {% if edificio.estado=='Malo' %}selected{% endif %}>Malo</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <label for="fecha_incorporacion" class="form-label">Fecha de Incorporación:</label>
                        <input type="date" class="form-control" id="fecha_incorporacion" name="fecha_incorporacion"
                            required
                            value="{{ edificio.fecha_incorporacion.strftime('%Y-%m-%d') if edificio.fecha_incorporacion }}">
                    </div>
                    <div class="col-md-4">
                        <label for="imagen" class="form-label">Imagen del Vehículo:</label>
                        <input type="file" class="form-control" id="imagen" name="imagen" accept="image/*">
                        {% if edificio.imagen %}
                        <small class="form-text">Imagen actual:</small>
                        <img src="{{ url_for('static', filename='uploads/' + edificio.imagen) }}"
                            style="max-width: 100px; max-height: 80px;" alt="Imagen actual">
                        {% endif %}
                    </div>
                </div>
            </fieldset>

            <!-- DATOS FINANCIEROS -->
            <fieldset class="border p-3 mb-4">
                <legend>Datos Financieros</legend>
                <div class="row">
                    <div class="col-md-4">
                        <label for="costo_inicial" class="form-label">Costo Inicial:</label>
                        <input type="number" step="0.01" class="form-control" id="costo_inicial" min="0"
                            name="costo_inicial" required value="{{ edificio.costo_inicial }}">
                    </div>
                    <div class="col-md-4">
                        <label for="factura" class="form-label">Nº Factura:</label>
                        <input type="number" step="0.01" class="form-control" id="factura" min="0" name="factura"
                            required value="{{ edificio.factura }}">
                    </div>
                    <div class="col-md-4">
                        <label for="factor_de_actualizacion" class="form-label">Factor de Actualización:</label>
                        <input type="number" step="0.00000001" class="form-control" id="factor_de_actualizacion" min="0"
                            name="factor_de_actualizacion" required value="{{ edificio.factor_de_actualizacion }}">
                    </div>
                    <div class="col-md-4">
                        <label for="años_vida_util" class="form-label">Años de Vida Útil:</label>
                        <input type="number" class="form-control" id="años_vida_util" name="años_vida_util" min="0"
                            required value="{{ edificio.años_vida_util }}">
                    </div>
                </div>
            </fieldset>

            <!-- DATOS RESPONSABLE -->
            <fieldset class="border p-3 mb-4">
                <legend>Datos del Responsable</legend>
                <div class="row">
                    <div class="col-md-6">
                        <label for="cargo" class="form-label">Cargo:</label>
                        <input type="text" class="form-control" id="cargo" name="cargo" value="{{ edificio.cargo }}">
                    </div>
                    <div class="col-md-6">
                        <label for="responsable" class="form-label">Nombre del Responsable:</label>
                        <input type="text" class="form-control" id="responsable" name="responsable"
                            value="{{ edificio.responsable }}">
                    </div>
                </div>
            </fieldset>

            <!-- Botones -->
            <div class="d-flex justify-content mb-4">
                <button type="submit" class="btn btn-primary mr-2">Guardar</button>
                <a href="{{ url_for('edificio.index') }}" class="btn btn-secondary">Cancelar</a>
            </div>
            <br>
            <br>
            <br>
        </form>
    </div>
</div>
{% endblock %}